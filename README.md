# DAISIEprepExtra

<!-- badges: start -->
[![R-CMD-check](https://github.com/joshwlambert/DAISIEprepExtra/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/joshwlambert/DAISIEprepExtra/actions/workflows/R-CMD-check.yaml)
[![Lifecycle: stable](https://img.shields.io/badge/lifecycle-stable-brightgreen.svg)](https://lifecycle.r-lib.org/articles/stages.html#stable)
[![Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed.](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.7654823.svg)](https://doi.org/10.5281/zenodo.7654823)
<!-- badges: end -->

This package contains the scripts and documents to accompany and reproduce Lambert et al. (in prep) application paper describing the `{DAISIEprep}` R package.

## Installation

DAISIEprepExtra can be installed from GitHub:

``` r
if (!requireNamespace("remotes", quietly = TRUE)) install.packages("remotes")
remotes::install_github("joshwlambert/DAISIEprepExtra")
```

The package contains several datasets and scripts in order to reproduce the figures and analysis from the 
applications paper. 

The data contained can be found in the 'data/' folder. There are two data sets that correspond to the empirical examples from the paper:

1. The mammals of Madagascar
2. The asteraceae of Hawaii 

The other file contained in the 'data/' folder is to reproduce the world map from figure 1 in the paper.

The raw data is contained in 'inst/extdata/' and the scripts containing the processing steps for the raw data are in 'data-raw/'. (_Note_ when DAISIEprepExtra is installed the `extdata/` folder and others in `inst/` will move to the top-level directory, see [the R packages book](https://r-pkgs.org/misc.html#sec-misc-inst) for more information on this).

The complete scripts to extract and analyse the mammal and asteraceae data can be found in 'inst/extdata/scripts/'. 

* The mammals of Madagascar R scripts:
  - [Single phylogeny script: `inst/scripts/single_phylo_example.R`](inst/scripts/single_phylo_example.R)
  - [Multi-phylogeny script: `inst/scripts/posterior_phylo_example.R`](inst/scripts/posterior_phylo_example.R)

* [The asteraceae of Hawaii R script: `inst/scripts/multi_phylo_example.R`](inst/scripts/multi_phylo_example.R)

The Peregrine [High Performance Computing Cluster](https://wiki.hpc.rug.nl/peregrine/start) at the University of Groningen was used to run several scripts that would otherwise take too long to run on a personal computer. The bash scripts used to submit jobs to run on the cluster can be found in 'inst/extdata/bash/'. This includes scripts to load the packages stored within the renv, scripts to run the sensitivity and performance analysis for vignettes in the DAISIEprep package, and scripts to run the empirical examples. All bash scripts, except the install script and the script to run jobs in parallel (which have "_parallel.sh" in the file name) call R scripts found in 'inst/extdata/scripts/' and thus can be run on any computer with R installed.

To reproduce the plots in the paper, the scripts can be found in 'inst/extdata/plots/'.

The data used in the sensitivity and performance vignettes in the `{DAISIEprep}` package can be found in the 'inst/extdata/sensitivity_data' and 'inst/extdata/performance_data/', respectively. This data was generated by running the 'sensitivity_parallel.R', 'performance_parallel.R', and 'performance_empirical.R' scripts on the University of Groningen HPCC.

This R package does not contain any functions. Instead it houses scripts and data, along with package dependency managed by `{renv}`. This maximises the possibility for reproducibility. To check which packages are used see the 'renv.lock' file and the DESCRIPTION file, both in the root directory. All packages used are available from either CRAN or GitHub. This package (`{DAISIEprepExtra}`) is also versioned to ensure that changes are recorded and so a correct version of this package can be installed and used when needed. See the DOI at the start of this README or the version stated in the DESCRIPTION file to check the version.

